{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/Development/code/Mod-4/project/paws-up-frontend/paws-up-client/src/hocs/withAuth.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router';\nimport { fetchCurrentAdopter } from '../actions/adopter';\nimport { Loader } from 'semantic-ui-react';\n\nconst withAuth = WrappedComponent => {\n  class AuthorizedComponent extends React.Component {\n    componentDidMount() {\n      console.log('%c INSIDE COMPONENT DID MOUNT FOR AUTH HOC', 'color: purple');\n      if (localStorage.getItem('jwt') && !this.props.loggedIn) this.props.fetchCurrentAdopter();\n    }\n\n    render() {\n      console.log('%c INSIDE RENDER FOR HOC', 'color: green');\n\n      if (localStorage.getItem('jwt') && this.props.loggedIn) {\n        return React.createElement(WrappedComponent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 18\n          },\n          __self: this\n        });\n      } else if (localStorage.getItem('jwt') && (this.props.authenticatingAdopter || !this.props.loggedIn)) {\n        return React.createElement(Loader, {\n          active: true,\n          inline: \"centered\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 20\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22\n          },\n          __self: this\n        });\n      }\n    }\n\n  }\n\n  const mapStateToProps = reduxStoreState => {\n    return {\n      loggedIn: reduxStoreState.adoptersReducer.loggedIn,\n      authenticatingAdopter: reduxStoreState.adoptersReducer.authenticatingAdopter\n    };\n  }; // const mapDispatchToProps = (dispatch) => {\n  //   return {\n  //     fetchCurrentAdopter: () => dispatch(fetchCurrentAdopter()),\n  //   }\n  // }\n\n\n  return connect(mapStateToProps, {\n    fetchCurrentAdopter\n  })(AuthorizedComponent);\n};\n\nexport default withAuth;","map":{"version":3,"sources":["/Users/flatironschool/Development/code/Mod-4/project/paws-up-frontend/paws-up-client/src/hocs/withAuth.js"],"names":["React","connect","Redirect","fetchCurrentAdopter","Loader","withAuth","WrappedComponent","AuthorizedComponent","Component","componentDidMount","console","log","localStorage","getItem","props","loggedIn","render","authenticatingAdopter","mapStateToProps","reduxStoreState","adoptersReducer"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,mBAAT,QAAoC,oBAApC;AACA,SAASC,MAAT,QAAuB,mBAAvB;;AAEA,MAAMC,QAAQ,GAAIC,gBAAD,IAAsB;AACrC,QAAMC,mBAAN,SAAkCP,KAAK,CAACQ,SAAxC,CAAkD;AAChDC,IAAAA,iBAAiB,GAAG;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ,EAA0D,eAA1D;AACA,UAAIC,YAAY,CAACC,OAAb,CAAqB,KAArB,KAA+B,CAAC,KAAKC,KAAL,CAAWC,QAA/C,EAAyD,KAAKD,KAAL,CAAWX,mBAAX;AAC1D;;AAEDa,IAAAA,MAAM,GAAG;AACPN,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwC,cAAxC;;AACA,UAAIC,YAAY,CAACC,OAAb,CAAqB,KAArB,KAA+B,KAAKC,KAAL,CAAWC,QAA9C,EAAwD;AAEtD,eAAO,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAHD,MAGO,IAAIH,YAAY,CAACC,OAAb,CAAqB,KAArB,MAAgC,KAAKC,KAAL,CAAWG,qBAAX,IAAoC,CAAC,KAAKH,KAAL,CAAWC,QAAhF,CAAJ,EAA+F;AACpG,eAAO,oBAAC,MAAD;AAAQ,UAAA,MAAM,MAAd;AAAe,UAAA,MAAM,EAAC,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFM,MAEA;AACL,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF;;AAhB+C;;AAmBlD,QAAMG,eAAe,GAAIC,eAAD,IAAqB;AAC3C,WAAO;AACLJ,MAAAA,QAAQ,EAAEI,eAAe,CAACC,eAAhB,CAAgCL,QADrC;AAELE,MAAAA,qBAAqB,EAAEE,eAAe,CAACC,eAAhB,CAAgCH;AAFlD,KAAP;AAID,GALD,CApBqC,CA2BrC;AACA;AACA;AACA;AACA;;;AAEA,SAAOhB,OAAO,CAACiB,eAAD,EAAkB;AAAEf,IAAAA;AAAF,GAAlB,CAAP,CAAkDI,mBAAlD,CAAP;AACD,CAlCD;;AAoCA,eAAeF,QAAf","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router'\nimport { fetchCurrentAdopter } from '../actions/adopter'\nimport { Loader } from 'semantic-ui-react'\n\nconst withAuth = (WrappedComponent) => {\n  class AuthorizedComponent extends React.Component {\n    componentDidMount() {\n      console.log('%c INSIDE COMPONENT DID MOUNT FOR AUTH HOC', 'color: purple')\n      if (localStorage.getItem('jwt') && !this.props.loggedIn) this.props.fetchCurrentAdopter()\n    }\n\n    render() {\n      console.log('%c INSIDE RENDER FOR HOC', 'color: green')\n      if (localStorage.getItem('jwt') && this.props.loggedIn) {\n\n        return <WrappedComponent />\n      } else if (localStorage.getItem('jwt') && (this.props.authenticatingAdopter || !this.props.loggedIn)) {\n        return <Loader active inline=\"centered\" />\n      } else {\n        return <Redirect to=\"/login\" />\n      }\n    }\n  }\n\n  const mapStateToProps = (reduxStoreState) => {\n    return {\n      loggedIn: reduxStoreState.adoptersReducer.loggedIn,\n      authenticatingAdopter: reduxStoreState.adoptersReducer.authenticatingAdopter\n    }\n  }\n\n  // const mapDispatchToProps = (dispatch) => {\n  //   return {\n  //     fetchCurrentAdopter: () => dispatch(fetchCurrentAdopter()),\n  //   }\n  // }\n\n  return connect(mapStateToProps, { fetchCurrentAdopter })(AuthorizedComponent)\n}\n\nexport default withAuth\n"]},"metadata":{},"sourceType":"module"}