{"ast":null,"code":"export const loginAdopter = (username, password) => {\n  return dispatch => {\n    dispatch({\n      type: 'AUTHENTICATING_ADOPTER'\n    });\n    fetch(\"\".concat(process.env.REACT_APP_API_ENDPOINT, \"/api/v1/login\"), {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        adopter: {\n          username: username,\n          password: password\n        }\n      })\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw response;\n      }\n    }).then(JSONResponse => {\n      console.log('%c INSIDE YE OLDE .THEN', 'color: navy');\n      localStorage.setItem('jwt', JSONResponse.jwt);\n      dispatch({\n        type: 'SET_CURRENT_ADOPTER',\n        payload: JSONResponse.adopter\n      });\n    }).catch(r => r.json().then(e => dispatch({\n      type: 'FAILED_LOGIN',\n      payload: e.message\n    })));\n  };\n};\nexport const fetchCurrentAdopter = () => {\n  return dispatch => {\n    dispatch(authenticatingAdopter());\n    fetch(\"\".concat(process.env.REACT_APP_API_ENDPOINT, \"/api/v1/profile\"), {\n      method: 'GET',\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem('jwt'))\n      }\n    }).then(response => response.json()).then(JSONResponse => dispatch(setCurrentAdopter(JSONResponse.adopter)));\n  };\n};\nexport const setCurrentAdopter = adopterData => ({\n  type: 'SET_CURRENT_ADOPTER',\n  payload: adopterData\n});\nexport const failedLogin = errorMsg => ({\n  type: 'FAILED_LOGIN',\n  payload: errorMsg\n});\nexport const authenticatingAdopter = () => ({\n  type: 'AUTHENTICATING_ADOPTER'\n});\nexport const logout = () => {\n  return dispatch => {\n    localStorage.removeItem(\"jwt\");\n    dispatch({\n      type: 'LOG_OUT'\n    });\n  };\n};","map":{"version":3,"sources":["/Users/flatironschool/Development/code/Mod-4/project/paws-up-frontend/paws-up-client/src/actions/adopter.js"],"names":["loginAdopter","username","password","dispatch","type","fetch","process","env","REACT_APP_API_ENDPOINT","method","headers","Accept","body","JSON","stringify","adopter","then","response","ok","json","JSONResponse","console","log","localStorage","setItem","jwt","payload","catch","r","e","message","fetchCurrentAdopter","authenticatingAdopter","Authorization","getItem","setCurrentAdopter","adopterData","failedLogin","errorMsg","logout","removeItem"],"mappings":"AAAA,OAAO,MAAMA,YAAY,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAClD,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACAC,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,oBAAuD;AAC1DC,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAENC,QAAAA,MAAM,EAAE;AAFF,OAFiD;AAM1DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,OAAO,EAAE;AACPd,UAAAA,QAAQ,EAAEA,QADH;AAEPC,UAAAA,QAAQ,EAAEA;AAFH;AADU,OAAf;AANoD,KAAvD,CAAL,CAaGc,IAbH,CAaQC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACD,OAFD,MAEO;AACL,cAAMF,QAAN;AACD;AACF,KAnBH,EAoBGD,IApBH,CAoBQI,YAAY,IAAI;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuC,aAAvC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BJ,YAAY,CAACK,GAAzC;AACAtB,MAAAA,QAAQ,CAAC;AAAEC,QAAAA,IAAI,EAAE,qBAAR;AAA+BsB,QAAAA,OAAO,EAAEN,YAAY,CAACL;AAArD,OAAD,CAAR;AACD,KAxBH,EAyBGY,KAzBH,CAyBSC,CAAC,IAAIA,CAAC,CAACT,IAAF,GAASH,IAAT,CAAca,CAAC,IAAI1B,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE,cAAR;AAAwBsB,MAAAA,OAAO,EAAEG,CAAC,CAACC;AAAnC,KAAD,CAA3B,CAzBd;AA0BD,GA5BD;AA6BD,CA9BM;AAgCP,OAAO,MAAMC,mBAAmB,GAAG,MAAM;AACvC,SAAQ5B,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC6B,qBAAqB,EAAtB,CAAR;AACA3B,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,sBAAyD;AAC5DC,MAAAA,MAAM,EAAE,KADoD;AAE5DC,MAAAA,OAAO,EAAE;AACPuB,QAAAA,aAAa,mBAAYV,YAAY,CAACW,OAAb,CAAqB,KAArB,CAAZ;AADN;AAFmD,KAAzD,CAAL,CAMGlB,IANH,CAMQC,QAAQ,IAAIA,QAAQ,CAACE,IAAT,EANpB,EAOGH,IAPH,CAOSI,YAAD,IAAkBjB,QAAQ,CAACgC,iBAAiB,CAACf,YAAY,CAACL,OAAd,CAAlB,CAPlC;AAQD,GAVD;AAWD,CAZM;AAcP,OAAO,MAAMoB,iBAAiB,GAAIC,WAAD,KAAkB;AACjDhC,EAAAA,IAAI,EAAE,qBAD2C;AAEjDsB,EAAAA,OAAO,EAAEU;AAFwC,CAAlB,CAA1B;AAKP,OAAO,MAAMC,WAAW,GAAIC,QAAD,KAAe;AACxClC,EAAAA,IAAI,EAAE,cADkC;AAExCsB,EAAAA,OAAO,EAAEY;AAF+B,CAAf,CAApB;AAKP,OAAO,MAAMN,qBAAqB,GAAG,OAAO;AAAE5B,EAAAA,IAAI,EAAE;AAAR,CAAP,CAA9B;AAEP,OAAO,MAAMmC,MAAM,GAAG,MAAM;AAAC,SAAQpC,QAAD,IAAY;AAC9CoB,IAAAA,YAAY,CAACiB,UAAb,CAAwB,KAAxB;AACArC,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACD,GAH4B;AAG3B,CAHK","sourcesContent":["export const loginAdopter = (username, password) => {\n  return (dispatch) => {\n    dispatch({ type: 'AUTHENTICATING_ADOPTER' })\n    fetch(`${process.env.REACT_APP_API_ENDPOINT}/api/v1/login`, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n         Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        adopter: {\n          username: username,\n          password: password\n        }\n      })\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json()\n        } else {\n          throw response\n        }\n      })\n      .then(JSONResponse => {\n        console.log('%c INSIDE YE OLDE .THEN', 'color: navy')\n        localStorage.setItem('jwt', JSONResponse.jwt)\n        dispatch({ type: 'SET_CURRENT_ADOPTER', payload: JSONResponse.adopter })\n      })\n      .catch(r => r.json().then(e => dispatch({ type: 'FAILED_LOGIN', payload: e.message })))\n  }\n}\n\nexport const fetchCurrentAdopter = () => {\n  return (dispatch) => {\n    dispatch(authenticatingAdopter())\n    fetch(`${process.env.REACT_APP_API_ENDPOINT}/api/v1/profile`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('jwt')}`\n      }\n    })\n      .then(response => response.json())\n      .then((JSONResponse) => dispatch(setCurrentAdopter(JSONResponse.adopter)))\n  }\n}\n\nexport const setCurrentAdopter = (adopterData) => ({\n  type: 'SET_CURRENT_ADOPTER',\n  payload: adopterData\n})\n\nexport const failedLogin = (errorMsg) => ({\n  type: 'FAILED_LOGIN',\n  payload: errorMsg\n})\n\nexport const authenticatingAdopter = () => ({ type: 'AUTHENTICATING_ADOPTER' })\n\nexport const logout = () => {return (dispatch)=>{\n  localStorage.removeItem(\"jwt\")\n  dispatch({ type: 'LOG_OUT'})\n}}\n"]},"metadata":{},"sourceType":"module"}