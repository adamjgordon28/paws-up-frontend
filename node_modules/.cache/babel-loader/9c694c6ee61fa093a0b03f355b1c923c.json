{"ast":null,"code":"export const loginAdopter = (username, password) => {\n  return dispatch => {\n    dispatch({\n      type: 'AUTHENTICATING_ADOPTER'\n    });\n    fetch(\"\".concat(process.env.REACT_APP_API_ENDPOINT, \"/api/v1/login\"), {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        adopter: {\n          username: username,\n          password: password\n        }\n      })\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw response;\n      }\n    }).then(JSONResponse => {\n      localStorage.setItem('jwt', JSONResponse.jwt);\n      dispatch({\n        type: 'SET_CURRENT_ADOPTER',\n        payload: JSONResponse.adopter\n      });\n    }).catch(r => r.json().then(e => dispatch({\n      type: 'FAILED_LOGIN',\n      payload: e.message\n    })));\n  };\n};\nexport const fetchCurrentAdopter = () => {\n  return dispatch => {\n    dispatch(authenticatingAdopter());\n    fetch(\"\".concat(process.env.REACT_APP_API_ENDPOINT, \"/api/v1/profile\"), {\n      method: 'GET',\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem('jwt'))\n      }\n    }).then(response => response.json()).then(JSONResponse => dispatch(setCurrentAdopter(JSONResponse.adopter)));\n  };\n};\nexport const setCurrentAdopter = adopterData => ({\n  type: 'SET_CURRENT_ADOPTER',\n  payload: adopterData\n});\nexport const failedLogin = errorMsg => ({\n  type: 'FAILED_LOGIN',\n  payload: errorMsg\n});\nexport const authenticatingAdopter = () => ({\n  type: 'AUTHENTICATING_ADOPTER'\n});\nexport const logout = () => {\n  return dispatch => {\n    localStorage.removeItem(\"jwt\");\n    dispatch({\n      type: 'LOG_OUT'\n    });\n  };\n};","map":{"version":3,"sources":["/Users/flatironschool/Development/code/Mod-4/project/paws-up-frontend/paws-up-client/src/actions/adopter.js"],"names":["loginAdopter","username","password","dispatch","type","fetch","process","env","REACT_APP_API_ENDPOINT","method","headers","Accept","body","JSON","stringify","adopter","then","response","ok","json","JSONResponse","localStorage","setItem","jwt","payload","catch","r","e","message","fetchCurrentAdopter","authenticatingAdopter","Authorization","getItem","setCurrentAdopter","adopterData","failedLogin","errorMsg","logout","removeItem"],"mappings":"AAAA,OAAO,MAAMA,YAAY,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAClD,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACAC,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,oBAAuD;AAC1DC,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAENC,QAAAA,MAAM,EAAE;AAFF,OAFiD;AAM1DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,OAAO,EAAE;AACPd,UAAAA,QAAQ,EAAEA,QADH;AAEPC,UAAAA,QAAQ,EAAEA;AAFH;AADU,OAAf;AANoD,KAAvD,CAAL,CAaGc,IAbH,CAaQC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACD,OAFD,MAEO;AACL,cAAMF,QAAN;AACD;AACF,KAnBH,EAoBGD,IApBH,CAoBQI,YAAY,IAAI;AACpBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,YAAY,CAACG,GAAzC;AACApB,MAAAA,QAAQ,CAAC;AAAEC,QAAAA,IAAI,EAAE,qBAAR;AAA+BoB,QAAAA,OAAO,EAAEJ,YAAY,CAACL;AAArD,OAAD,CAAR;AACD,KAvBH,EAwBGU,KAxBH,CAwBSC,CAAC,IAAIA,CAAC,CAACP,IAAF,GAASH,IAAT,CAAcW,CAAC,IAAIxB,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE,cAAR;AAAwBoB,MAAAA,OAAO,EAAEG,CAAC,CAACC;AAAnC,KAAD,CAA3B,CAxBd;AAyBD,GA3BD;AA4BD,CA7BM;AA+BP,OAAO,MAAMC,mBAAmB,GAAG,MAAM;AACvC,SAAQ1B,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC2B,qBAAqB,EAAtB,CAAR;AACAzB,IAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,sBAAyD;AAC5DC,MAAAA,MAAM,EAAE,KADoD;AAE5DC,MAAAA,OAAO,EAAE;AACPqB,QAAAA,aAAa,mBAAYV,YAAY,CAACW,OAAb,CAAqB,KAArB,CAAZ;AADN;AAFmD,KAAzD,CAAL,CAMGhB,IANH,CAMQC,QAAQ,IAAIA,QAAQ,CAACE,IAAT,EANpB,EAOGH,IAPH,CAOSI,YAAD,IAAkBjB,QAAQ,CAAC8B,iBAAiB,CAACb,YAAY,CAACL,OAAd,CAAlB,CAPlC;AAQD,GAVD;AAWD,CAZM;AAcP,OAAO,MAAMkB,iBAAiB,GAAIC,WAAD,KAAkB;AACjD9B,EAAAA,IAAI,EAAE,qBAD2C;AAEjDoB,EAAAA,OAAO,EAAEU;AAFwC,CAAlB,CAA1B;AAKP,OAAO,MAAMC,WAAW,GAAIC,QAAD,KAAe;AACxChC,EAAAA,IAAI,EAAE,cADkC;AAExCoB,EAAAA,OAAO,EAAEY;AAF+B,CAAf,CAApB;AAKP,OAAO,MAAMN,qBAAqB,GAAG,OAAO;AAAE1B,EAAAA,IAAI,EAAE;AAAR,CAAP,CAA9B;AAEP,OAAO,MAAMiC,MAAM,GAAG,MAAM;AAAC,SAAQlC,QAAD,IAAY;AAC9CkB,IAAAA,YAAY,CAACiB,UAAb,CAAwB,KAAxB;AACAnC,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACD,GAH4B;AAG3B,CAHK","sourcesContent":["export const loginAdopter = (username, password) => {\n  return (dispatch) => {\n    dispatch({ type: 'AUTHENTICATING_ADOPTER' })\n    fetch(`${process.env.REACT_APP_API_ENDPOINT}/api/v1/login`, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n         Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        adopter: {\n          username: username,\n          password: password\n        }\n      })\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json()\n        } else {\n          throw response\n        }\n      })\n      .then(JSONResponse => {\n        localStorage.setItem('jwt', JSONResponse.jwt)\n        dispatch({ type: 'SET_CURRENT_ADOPTER', payload: JSONResponse.adopter })\n      })\n      .catch(r => r.json().then(e => dispatch({ type: 'FAILED_LOGIN', payload: e.message })))\n  }\n}\n\nexport const fetchCurrentAdopter = () => {\n  return (dispatch) => {\n    dispatch(authenticatingAdopter())\n    fetch(`${process.env.REACT_APP_API_ENDPOINT}/api/v1/profile`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('jwt')}`\n      }\n    })\n      .then(response => response.json())\n      .then((JSONResponse) => dispatch(setCurrentAdopter(JSONResponse.adopter)))\n  }\n}\n\nexport const setCurrentAdopter = (adopterData) => ({\n  type: 'SET_CURRENT_ADOPTER',\n  payload: adopterData\n})\n\nexport const failedLogin = (errorMsg) => ({\n  type: 'FAILED_LOGIN',\n  payload: errorMsg\n})\n\nexport const authenticatingAdopter = () => ({ type: 'AUTHENTICATING_ADOPTER' })\n\nexport const logout = () => {return (dispatch)=>{\n  localStorage.removeItem(\"jwt\")\n  dispatch({ type: 'LOG_OUT'})\n}}\n"]},"metadata":{},"sourceType":"module"}